# Geoclient Documentation

This branch contains the source for the Geoclient documentation website: <https://mlipper.github.io/geoclient/>.

## Documentation Website

The website is built using [GitHub Pages](https://docs.github.com/en/pages) and [Jekyll](https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/adding-a-theme-to-your-github-pages-site-using-jekyll). It uses GitHub Pages' [slate](https://github.com/pages-themes/slate) theme.

## Generating project documentation

The [Geoclient User Guide](https://mlipper.github.io/geoclient/docs/current/user-guide) is created by the [geoclient/documentation](https://github.com/mlipper/geoclient/tree/next/documentation) subproject using [asciidoctor](https://docs.asciidoctor.org/).

The [Geoclient JavaDoc](https://mlipper.github.io/geoclient/docs/current/api) is generated by [gradle's javadoc task](https://docs.gradle.org/current/userguide/building_java_projects.html#sec:generating_javadocs).

## Previewing the website locally

To preview the theme locally:

1. Insure `ruby >= 3.3.x` and `bundler` are installed
1. Clone the `geoclient` repository (`git clone https://github.com/mlipper/geoclient`)
1. `cd` into the `geoclient` root directory and checkout the `gh-pages` branch (`git checkout gh-pages`)
1. Run `script/bootstrap` to install the necessary `jekyll` and `pages-themes/slate` dependencies
1. Run `bundle exec jekyll serve` to start the preview server
1. Visit <http://localhost:4000> in your browser to preview the website

> If `ruby` complains that `webrick` is missing when running `script/servelocal` (i.e. `bundle exec jekyll serve`) it could be because `ruby >= 3.0` stopped including it by default. To install `webrick` with `bundler`, run: `bundle add webrick`

For more troubleshooting tips, see:

* [Setting up a GitHub Pages site locally with Jekyll](https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/testing-your-github-pages-site-locally-with-jekyll>)
* [Troubleshooting Jekyll build errors for a GitHub Pages site](https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/troubleshooting-jekyll-build-errors-for-github-pages-sites)


## Problems

### Error running `script/bootstrap`

#### Symptom

```sh

./script/bootstrap 

Successfully installed bundler-2.6.9
Parsing documentation for bundler-2.6.9
Done installing documentation for bundler after 0 seconds
1 gem installed
/usr/local/lib/ruby/gems/3.4.0/bin/bundle:25:in 'Kernel#load': cannot load such file -- /usr/local/lib/ruby/gems/3.4.0/gems/bundler-2.6.6/exe/bundle (LoadError)
	from /usr/local/lib/ruby/gems/3.4.0/bin/bundle:25:in '<main>'

```

#### Cause

Error triggered by line `bundle install`.
Cause seems to be multiple versions of `bundler` installed.

#### Solution

Fixed by first adding the `gem` installation to the `PATH`.

```sh
# Add gem install to the PATH.
export PATH="/usr/local/lib/ruby/gems/3.4.0/bin:$PATH"
```

Then by removing all but the default copy of `bundler`:

```sh
gem uninstall bundler

Select gem to uninstall:
 1. bundler-2.6.6
 2. bundler-2.6.8
 3. bundler-2.6.9
 4. All versions
> 4
Successfully uninstalled bundler-2.6.6
Successfully uninstalled bundler-2.6.8
Successfully uninstalled bundler-2.6.9
There was both a regular copy and a default copy of bundler-2.6.9. The regular copy was successfully uninstalled, but the default copy was left around because default gems can't be removed.
```

